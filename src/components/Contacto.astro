---
import  Redes  from "../components/Redes.astro";
---
<section
    id="contacto"
    class="scroll-mt-32 pt-20 pb-12 px-4 md:px-8 lg:px-16 rounded-3xl shadow-2xl"
>
    
    <div
        class="w-full gap-12 lg:gap-20 justify-center items-center flex p-6 md:p-12 lg:p-20 flex-col lg:flex-row"
    >
    
        <form
            action="https://formspree.io/f/xwprakve"
            method="POST"
            class="w-full max-w-2xl flex flex-col gap-6 p-6 md:p-8 "
        >
            <div class="w-full flex flex-col md:flex-row md:items-start md:justify-between gap-6 mb-4">
                <div class="flex flex-col gap-3">
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-purple-600 text-start bbh-sans-hegarty-regular tracking-tight">
                        Contacto
                    </h2>
                    <div class="flex justify-start">
                        <Redes/>
                    </div>
                </div>
                <div class="flex-shrink-0 flex items-center justify-center md:justify-end">
                    <img
                        id="gengar"
                        src="/images/gengar.png"
                        alt="gengar animado"
                        class="w-44 md:w-52 max-w-[240px] md:max-w-sm lg:max-w-md h-auto object-contain drop-shadow-2xl hover:scale-105 transition-transform duration-500 neon-glow"
                    />
                </div>
            </div>
            <p
                class="text-base md:text-lg text-white mb-6 text-start leading-relaxed"
            >
                ¿Tienes alguna pregunta o quieres trabajar conmigo? ¡Envíame un
                mensaje!
            </p>

            <div class="flex flex-col gap-6">
                <!-- Campo Nombre -->
                <div class="flex flex-col gap-2">
                    <label
                        for="name"
                        class="text-sm font-semibold text-purple-600 uppercase tracking-wide"
                    >
                        Nombre
                    </label>
                    <input
                        class="w-full bg-white/95 backdrop-blur-sm border-2 border-purple-200/60 px-4 py-3 rounded-xl
                        focus:outline-none focus:ring-4 focus:ring-purple-300/50 focus:border-purple-400
                        transition-all duration-300 placeholder:text-gray-400 hover:border-purple-300"
                        type="text"
                        id="name"
                        name="name"
                        required
                        placeholder="Tu nombre completo"
                    />
                </div>

                <!-- Campo Email -->
                <div class="flex flex-col gap-2">
                    <label
                        for="email"
                        class="text-sm font-semibold text-purple-600 uppercase tracking-wide"
                    >
                        Correo
                    </label>
                    <input
                        class="w-full bg-white/95 backdrop-blur-sm border-2 border-purple-200/60 px-4 py-3 rounded-xl
                        focus:outline-none focus:ring-4 focus:ring-purple-300/50 focus:border-purple-400
                        transition-all duration-300 placeholder:text-gray-400 hover:border-purple-300"
                        type="email"
                        id="email"
                        name="email"
                        required
                        placeholder="correo@ejemplo.com"
                    />
                </div>

                <!-- Campo Mensaje -->
                <div class="flex flex-col gap-2">
                    <label
                        for="message"
                        class="text-sm font-semibold text-purple-600 uppercase tracking-wide"
                    >
                        Mensaje
                    </label>
                    <textarea
                        class="w-full min-h-[140px] bg-white/95 backdrop-blur-sm border-2 border-purple-200/60 px-4 py-3 rounded-xl
                        focus:outline-none focus:ring-4 focus:ring-purple-300/50 focus:border-purple-400
                        transition-all duration-300 placeholder:text-gray-400 hover:border-purple-300 resize-y"
                        id="message"
                        name="message"
                        required
                        placeholder="Escribe tu mensaje aquí..."></textarea>
                </div>
            </div>

            <button
                type="submit"
                class="mt-4 bg-gradient-to-r from-purple-500 to-purple-600 backdrop-blur-lg px-8 py-4 rounded-xl
                hover:scale-[1.02] hover:shadow-2xl hover:from-purple-600 hover:to-purple-700
                active:scale-[0.98] transition-all duration-300 shadow-xl w-full md:w-auto self-start cursor-pointer
                font-bold text-white text-base md:text-lg flex items-center justify-center gap-3 group"
            >
                <span>Enviar Mensaje</span>
                <svg
                    class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                </svg>
            </button>
        </form>

        
    </div>
</section>

<!-- Modal de confirmación -->
<div
    id="modal-confirmacion"
    class="fixed inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-50 opacity-0 pointer-events-none transition-all duration-300"
>
    <div
        class="bg-white rounded-2xl shadow-2xl p-8 md:p-10 max-w-md w-full mx-4 text-center transform scale-95 transition-transform duration-300"
    >
        <!-- Icono de éxito -->
        <div
            class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg"
        >
            <svg
                class="w-8 h-8 text-white"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="3"
                    d="M5 13l4 4L19 7"></path>
            </svg>
        </div>

        <h3 class="text-2xl md:text-3xl font-bold mb-4 text-purple-900">
            ¡Mensaje enviado!
        </h3>
        <p class="mb-8 text-gray-600 leading-relaxed">
            Tu mensaje ha sido enviado correctamente. Pronto me pondré en
            contacto contigo.
        </p>
        <button
            id="cerrar-modal"
            class="bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-3 rounded-xl
            hover:from-purple-600 hover:to-purple-700 hover:shadow-xl
            active:scale-95 transition-all duration-300 cursor-pointer font-bold text-white w-full md:w-auto"
        >
            Cerrar
        </button>
    </div>
</div>

<style>
  .neon-glow {
    filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.6))
            drop-shadow(0 0 20px rgba(168, 85, 247, 0.4))
            drop-shadow(0 0 30px rgba(147, 51, 234, 0.3));
    animation: neon-pulse 3s ease-in-out infinite;
    transition: filter 0.3s ease;
  }

  .neon-glow:hover {
    filter: drop-shadow(0 0 15px rgba(168, 85, 247, 0.8))
            drop-shadow(0 0 30px rgba(168, 85, 247, 0.6))
            drop-shadow(0 0 45px rgba(147, 51, 234, 0.5));
  }

  @keyframes neon-pulse {
    0%, 100% {
      filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.6))
              drop-shadow(0 0 20px rgba(168, 85, 247, 0.4))
              drop-shadow(0 0 30px rgba(147, 51, 234, 0.3));
    }
    50% {
      filter: drop-shadow(0 0 20px rgba(168, 85, 247, 0.8))
              drop-shadow(0 0 30px rgba(168, 85, 247, 0.6))
              drop-shadow(0 0 40px rgba(147, 51, 234, 0.4));
    }
  }
</style>

<script>
    import { gsap } from "gsap";
    const modal = document.getElementById("modal-confirmacion");
    const cerrarBtn = document.getElementById("cerrar-modal");
    const modalContent = modal?.querySelector("div");

    function mostrarModal() {
        if (modal && modalContent) {
            modal.classList.remove("opacity-0", "pointer-events-none");
            modal.classList.add("opacity-100");
            setTimeout(() => {
                modalContent.classList.remove("scale-95");
                modalContent.classList.add("scale-100");
            }, 10);
        }
    }

    function ocultarModal() {
        if (modal && modalContent) {
            modalContent.classList.remove("scale-100");
            modalContent.classList.add("scale-95");
            setTimeout(() => {
                modal.classList.add("opacity-0", "pointer-events-none");
                modal.classList.remove("opacity-100");
            }, 200);
        }
    }

    if (cerrarBtn) {
        cerrarBtn.addEventListener("click", ocultarModal);
    }

    // Cerrar modal al hacer clic fuera
    if (modal) {
        modal.addEventListener("click", (e) => {
            if (e.target === modal) {
                ocultarModal();
            }
        });
    }

    const form = document.querySelector("form");
    if (form) {
        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const data = new FormData(form);

            const response = await fetch(form.action, {
                method: form.method,
                body: data,
                headers: { Accept: "application/json" },
            });

            if (response.ok) {
                form.reset();
                mostrarModal();
            }
        });
    }

    gsap.to("#gengar", {
            scale: 1.2,
            duration: 1,
            ease: "power1.inOut",
            repeat: -1,
            yoyo: true, 
        });
</script>
